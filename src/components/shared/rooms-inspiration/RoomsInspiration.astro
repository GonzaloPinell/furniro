---
import RoomCarousel from "./RoomCarousel.astro";

interface Room {
  id: string;
  number: string;
  category: string;
  title: string;
  image: string;
}

const rooms: Room[] = [
  {
    id: "1",
    number: "01",
    category: "Bed Room",
    title: "Inner Peace",
    image: "bedroom",
  },
  {
    id: "2",
    number: "02",
    category: "Living Room",
    title: "Modern Comfort",
    image: "living",
  },
  {
    id: "3",
    number: "03",
    category: "Bed Room",
    title: "Cozy Space",
    image: "bedroom",
  },
  {
    id: "4",
    number: "04",
    category: "Living Room",
    title: "Elegant Design",
    image: "living",
  },
];
---

<section
  class="flex flex-col gap-8 bg-[#FCF8F3] px-4 py-12 md:px-8 md:py-16 lg:flex-row lg:items-center lg:gap-10 lg:px-12"
>
  <!-- Left Content -->
  <div class="flex w-full flex-col gap-4 md:gap-6 lg:max-w-md">
    <h2 class="text-3xl leading-tight font-bold text-gray-800 md:text-4xl">
      50+ Beautiful rooms inspiration
    </h2>
    <p class="text-base text-gray-600 md:text-lg">
      Our designer already made a lot of beautiful prototipe of rooms that
      inspire you
    </p>
    <button
      class="bg-primary w-fit px-8 py-3 text-sm font-semibold text-white transition-all hover:brightness-110 md:px-9 md:text-base"
    >
      Explore More
    </button>
  </div>

  <!-- Carousel -->
  <RoomCarousel rooms={rooms} />
</section>

<script>
  const carousel = document.getElementById("room-carousel");
  const nextBtn = document.getElementById("carousel-next");
  const indicators = document.querySelectorAll(".carousel-indicator");

  let currentIndex = 0;
  const totalSlides = indicators.length;
  const slideWidth = 404 + 24; // width + gap

  function updateCarousel() {
    if (!carousel) return;
    carousel.scrollTo({
      left: slideWidth * currentIndex,
      behavior: "smooth",
    });
    updateIndicators();
  }

  function updateIndicators() {
    indicators.forEach((indicator, index) => {
      if (index === currentIndex) {
        indicator.classList.add("bg-primary", "border-primary", "border-2");
        indicator.classList.remove("bg-gray-300");
      } else {
        indicator.classList.add("bg-gray-300");
        indicator.classList.remove("bg-primary", "border-primary", "border-2");
      }
    });
  }

  nextBtn?.addEventListener("click", () => {
    currentIndex = currentIndex < totalSlides - 1 ? currentIndex + 1 : 0;
    updateCarousel();
  });

  indicators.forEach((indicator, index) => {
    indicator.addEventListener("click", () => {
      currentIndex = index;
      updateCarousel();
    });
  });

  // Initialize
  updateIndicators();
</script>
