---
import Account from "@/assets/icons/account.svg";
import Cart from "@/assets/icons/cart.svg";
import Heart from "@/assets/icons/heart.svg";
import Logo from "@/assets/brand/furniro.svg";
import Search from "@/assets/icons/search.svg";
import NavigationIcons from "./NavigationIcons.astro";
import NavigationItems from "./NavigationItems.astro";
---

<nav
  class="fixed top-0 right-0 left-0 z-50 flex h-20 items-center justify-between gap-4 bg-white px-4 shadow-sm md:h-24 md:gap-8 md:px-8 lg:px-12"
>
  <Logo class="h-6 w-auto md:h-8" />

  <!-- Desktop Navigation -->
  <div class="hidden md:block">
    <NavigationItems />
  </div>
  <div class="hidden md:flex">
    <NavigationIcons />
  </div>

  <!-- Mobile Menu Button -->
  <button
    id="mobile-menu-button"
    class="flex h-10 w-10 flex-col items-center justify-center gap-1.5 md:hidden"
    aria-label="Toggle menu"
  >
    <span class="mobile-menu-bar h-0.5 w-6 bg-gray-800 transition-all"></span>
    <span class="mobile-menu-bar h-0.5 w-6 bg-gray-800 transition-all"></span>
    <span class="mobile-menu-bar h-0.5 w-6 bg-gray-800 transition-all"></span>
  </button>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="fixed top-20 right-0 left-0 hidden bg-white shadow-lg md:hidden"
  >
    <!-- Navigation Links -->
    <ul class="flex flex-col gap-0 py-2">
      <li>
        <a
          href="/"
          class="block px-6 py-4 text-base font-medium transition-colors hover:bg-gray-50 hover:text-amber-600"
          >Home</a
        >
      </li>
      <li>
        <a
          href="/shop"
          class="block px-6 py-4 text-base font-medium transition-colors hover:bg-gray-50 hover:text-amber-600"
          >Shop</a
        >
      </li>
      <li>
        <a
          href="/about"
          class="block px-6 py-4 text-base font-medium transition-colors hover:bg-gray-50 hover:text-amber-600"
          >About</a
        >
      </li>
      <li>
        <a
          href="/contact"
          class="block px-6 py-4 text-base font-medium transition-colors hover:bg-gray-50 hover:text-amber-600"
          >Contact</a
        >
      </li>
    </ul>

    <!-- Navigation Icons -->
    <div
      class="flex items-center justify-center gap-8 border-t border-gray-200 px-6 py-6"
    >
      <button class="cursor-pointer transition-transform hover:scale-110">
        <Account class="h-6 w-6" />
      </button>
      <button class="cursor-pointer transition-transform hover:scale-110">
        <Search class="h-6 w-6" />
      </button>
      <button class="cursor-pointer transition-transform hover:scale-110">
        <Heart class="h-6 w-6" />
      </button>
      <button class="cursor-pointer transition-transform hover:scale-110">
        <Cart class="h-6 w-6" />
      </button>
    </div>
  </div>
</nav>

<script>
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuBars = document.querySelectorAll(".mobile-menu-bar");

  let isOpen = false;

  mobileMenuButton?.addEventListener("click", () => {
    isOpen = !isOpen;

    if (isOpen) {
      mobileMenu?.classList.remove("hidden");
      menuBars[0]?.classList.add("rotate-45", "translate-y-2");
      menuBars[1]?.classList.add("opacity-0");
      menuBars[2]?.classList.add("-rotate-45", "-translate-y-2");
    } else {
      mobileMenu?.classList.add("hidden");
      menuBars[0]?.classList.remove("rotate-45", "translate-y-2");
      menuBars[1]?.classList.remove("opacity-0");
      menuBars[2]?.classList.remove("-rotate-45", "-translate-y-2");
    }
  });

  // Cerrar menÃº al hacer clic en un enlace
  const mobileLinks = mobileMenu?.querySelectorAll("a");
  mobileLinks?.forEach((link) => {
    link.addEventListener("click", () => {
      isOpen = false;
      mobileMenu?.classList.add("hidden");
      menuBars[0]?.classList.remove("rotate-45", "translate-y-2");
      menuBars[1]?.classList.remove("opacity-0");
      menuBars[2]?.classList.remove("-rotate-45", "-translate-y-2");
    });
  });
</script>
